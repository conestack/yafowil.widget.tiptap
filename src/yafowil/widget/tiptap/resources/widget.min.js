!function(t,e,i){"use strict";class s{static create(t,i){let d=e("<button />");return new s(t,d,i)}constructor(t,e,i){this.elem=e,this.widget=t,this.ops=i,this.on_click=this.on_click.bind(this),this.elem.on("click",this.on_click)}on_click(t){t.preventDefault(),this.ops&&this.ops.click&&this.ops.click()}}class d extends s{constructor(t,e,i){super(t,e,i),this.do=this.ops.toggle[0].bind(this.widget),this.undo=this.ops.toggle[1].bind(this.widget)}on_click(t){super.on_click(t),this.active=!this.active,this.active?(this.elem.addClass("active"),this.do()):(this.elem.removeClass("active"),this.undo())}}class l extends s{static create(t){let i=e("<button />").addClass("drop_btn");return new l(t,i)}constructor(t,i){super(t,i),this.dd_elem=e("<div />").addClass("btn-dropdown").appendTo(t.elem),this.hide_dropdown=this.hide_dropdown.bind(this),e(document).on("click",this.hide_dropdown)}unload(){e(document).off("click",this.hide_dropdown)}hide_dropdown(t){this.dd_elem.is(":visible")&&t.target!==this.dd_elem[0]&&t.target!==this.elem[0]&&0===e(t.target).closest(this.dd_elem).length&&0===e(t.target).closest(this.elem).length&&this.dd_elem.hide()}on_click(t){super.on_click(t),this.dd_elem.css("transform",`translate(${this.elem.position().left}px, ${this.elem.outerHeight()}px)`),this.dd_elem.toggle()}}class o extends l{static create(t){let i=e("<button />").addClass("drop_btn");return new o(t,i)}constructor(t,i){super(t,i),this.src_input=e("<span />").addClass("dropdown-item").text("source:").append(e('<input type="text" />').addClass("img-source")).appendTo(this.dd_elem),this.title_input=e("<span />").addClass("dropdown-item").text("title:").append(e('<input type="text" />').addClass("img-title")).appendTo(this.dd_elem),this.alt_input=e("<span />").addClass("dropdown-item").text("alt:").append(e('<input type="text" />').addClass("img-alt")).appendTo(this.dd_elem);let d=this.submit_btn_elem=e("<button />").text("submit").appendTo(this.dd_elem);this.submit_btn=new s(t,d),this.submit_btn.elem.on("click",(t=>{let i=e("input.img-source",this.dd_elem).val(),s=e("input.img-alt",this.dd_elem).val(),d=e("input.img-title",this.dd_elem).val();this.widget.editor.commands.setImage({src:i,alt:s,title:d})}))}}class n{static initialize(t){e("div.tiptap-editor",t).each((function(){new n(e(this),{bold:!0,italic:!0,underline:!0,heading:!0,text_colors:[{name:"blue",color:"#1a21fb"},{name:"lime",color:"#ccff00"},{name:"teal",color:"#2acaea"},{name:"red",color:"#d0060a"}],bulletList:!0,orderedList:!0})}))}constructor(t,s){this.elem=t,this.elem.data("tiptap-widget",this),this.editor=new i.Editor({element:this.elem[0],extensions:[i.Document,i.Paragraph,i.Text,i.Underline,i.TextStyle,i.Color,i.Heading,i.BulletList,i.OrderedList,i.ListItem,i.Blockquote,i.Bold,i.Italic,i.Code,i.CodeBlock,i.Image],content:"<p>Hello World!</p>"}),this.editarea=e("div.ProseMirror",this.elem),this.textarea=e("<textarea />").addClass("ProseMirror").appendTo(this.elem),this.buttons_textstyles=e("<div />").addClass("btn-group").prependTo(this.elem);let l=e("<button />").append(e('<i class="glyphicon glyphicon-pencil">')).insertAfter(this.buttons_textstyles);this.html_btn=new d(this,l,{toggle:[function(){let t=this.editor.getHTML();this.editarea.hide(),this.textarea.show().text(t)},function(){let t=this.textarea.val();this.textarea.hide(),this.editarea.show(),this.editor.commands.setContent(t)}]});let n=e("<button />").append(e('<i class="glyphicon glyphicon-picture">')).insertAfter(this.buttons_textstyles);this.image_btn=new o(this,n),this.hide_all=this.hide_all.bind(this),this.editor.on("update",this.hide_all)}unload_all(){}hide_all(){e("div.btn-dropdown",this.elem).hide()}}e((function(){void 0!==window.ts?ts.ajax.register(n.initialize,!0):n.initialize()})),t.TiptapWidget=n,Object.defineProperty(t,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.tiptap=t}({},jQuery,tiptap);
//# sourceMappingURL=widget.min.js.map
